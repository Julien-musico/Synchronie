<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Grilles d'évaluation</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
{% extends "base.html" %}
{% block title %}Grilles d'évaluation{% endblock %}
{% block content %}
<div class="container py-4">
	<h2 class="mb-4">Grilles d'évaluation thérapeutique</h2>
	<div class="row">
		<div class="col-12 mb-3">
			<p>Nombre de grilles personnalisées : {{ grilles_user|length }}</p>
			<p>Nombre de grilles publiques : {{ grilles_publiques|length }}</p>
		</div>
		<div class="col-md-6">
			<h4>Mes grilles personnalisées</h4>
			{% if grilles_user and grilles_user|length > 0 %}
				<div class="list-group mb-3">
					{% for grille in grilles_user %}
						<a href="{{ url_for('cotation.grille_detail', grille_id=grille.id) }}" class="list-group-item list-group-item-action d-flex align-items-center">
							<span class="badge bg-success me-2"><i class="bi bi-person-badge"></i></span>
							<div>
								<strong>{{ grille.nom }}</strong><br>
								<small>{{ grille.description }}</small>
							</div>
						</a>
					{% endfor %}
				</div>
			{% else %}
				<div class="alert alert-info">Aucune grille personnalisée disponible.</div>
			{% endif %}
		</div>
		<div class="col-md-6">
			<h4>Grilles publiques et standards</h4>
			{% if grilles_publiques and grilles_publiques|length > 0 %}
				<div class="list-group mb-3">
					{% for grille in grilles_publiques %}
						{% set is_dict = grille.__class__.__name__ == 'dict' %}
						{% set grille_id = grille['id'] if is_dict else grille.id %}
						{% set grille_nom = grille['nom'] if is_dict else grille.nom %}
						{% set grille_desc = grille['description'] if is_dict else grille.description %}
						{% set grille_type = grille.get('type_grille', 'standard') if is_dict else grille.type_grille %}
						<a href="{% if grille_id is string and grille_id.startswith('std-') %}{{ url_for('cotation.grille_standard_detail', grille_id=grille_id[4:]) }}{% else %}{{ url_for('cotation.grille_detail', grille_id=grille_id) }}{% endif %}" class="list-group-item list-group-item-action d-flex align-items-center">
							{% if grille_type == 'standard' or (grille_id is string and grille_id.startswith('std-')) %}
								<span class="badge bg-primary me-2"><i class="bi bi-award"></i></span>
							{% else %}
								<span class="badge bg-success me-2"><i class="bi bi-person-badge"></i></span>
							{% endif %}
							<div>
								<strong>{{ grille_nom }}</strong><br>
								<small>{{ grille_desc }}</small>
							</div>
						</a>
					{% endfor %}
				</div>
			{% else %}
				<div class="alert alert-warning">Aucune grille publique ou standard disponible.</div>
			{% endif %}
		</div>
	</div>
</div>
{% endblock %}


<footer>
	<p>&copy; 2023 Mon Application</p>
</footer>
</body>
</html>
