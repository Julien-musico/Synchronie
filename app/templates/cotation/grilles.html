<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Grilles d'évaluation</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
{% extends "base.html" %}
{% block title %}Grilles d'évaluation{% endblock %}
{% block content %}
<div class="container py-4">
	<h2 class="mb-4">Grilles d'évaluation thérapeutique</h2>
	<div class="row">
		<div class="col-12 mb-3">
			<p>Nombre de grilles personnalisées : {{ grilles_perso|length }}</p>
			<p>Nombre de grilles standardisées : {{ grilles_standard|length }}</p>
		</div>
		<div class="col-md-6">
			<h4>Mes grilles personnalisées</h4>
			<a href="{{ url_for('cotation.creer_grille_personalisee') }}" class="btn btn-primary mb-3">
				<i class="bi bi-plus-circle"></i> Créer une nouvelle grille personnalisée
			</a>
			{% if grilles_perso and grilles_perso|length > 0 %}
				<div class="list-group mb-3">
					{% for grille in grilles_perso %}
						<a href="{{ url_for('cotation.grille_detail', grille_id=grille.id) }}" class="list-group-item list-group-item-action d-flex align-items-center">
							<span class="badge bg-success me-2"><i class="bi bi-person-badge"></i></span>
							<div>
								<strong>{{ grille.nom }}</strong><br>
								<small>{{ grille.description }}</small>
							</div>
						</a>
					{% endfor %}
				</div>
			{% else %}
				<div class="alert alert-info">Aucune grille personnalisée disponible.</div>
			{% endif %}
		</div>
		<div class="col-md-6">
			<h4>Grilles publiques et standards</h4>
			{% if grilles_standard and grilles_standard|length > 0 %}
				<div class="list-group mb-3">
					{% for grille in grilles_standard %}
						<div class="list-group-item">
							<a href="{{ url_for('cotation.grille_detail', grille_id=grille.id) }}" class="d-flex align-items-center text-decoration-none">
								{% if grille.type_grille == 'standard' %}
									<span class="badge bg-primary me-2"><i class="bi bi-award"></i></span>
								{% else %}
									<span class="badge bg-success me-2"><i class="bi bi-person-badge"></i></span>
								{% endif %}
								<div>
									<strong>{{ grille.nom }}</strong><br>
									<small>{{ grille.description }}</small><br>
									<span class="badge-soft">
										{{ grille.domaines|length }} domaines,
										{% set total_indicateurs = 0 %}
										{{ grille.domaines | map(attribute='indicateurs') | map('length') | sum }} indicateurs
									</span>
								</div>
							</a>
						</div>
					{% endfor %}
				</div>
			{% else %}
				<div class="alert alert-warning">Aucune grille standardisée disponible.</div>
			{% endif %}
		</div>
	</div>
</div>
{% endblock %}


<footer>
	<p>&copy; 2023 Mon Application</p>
</footer>
</body>
</html>
